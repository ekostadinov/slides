<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Test flow control</title>

		<meta name="description" content="Presentation about Automation testing with JAVA">
		<meta name="author" content="Evgeni Kostadinov">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="../css/reveal.css">
		<link rel="stylesheet" href="../css/theme/progress.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="../lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? '../css/print/pdf.css' : '../css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Test flow control</h1>
					<p>
						<img width="600" height="300" data-src="../images/11/11s1.jpg">
					</p>
				</section>

				<section style="text-align: left;">
					<h4 style="font-style:italic; text-decoration: underline;">TABLE OF CONTENTS</h4>
					<ul>
						<li>Explicit waits</li>
						<li>Implicit waits</li>
						<li>Custom-expected conditions</li>							
						<li>Popup and alert windows</li>
						<li>Frames</li>
						<li>Verifications and Asseritons</li>
					</ul>					
					<img style="margin-top:-90%;margin-left:10%;" width="300" height="400" data-src="../images/11/11s2.jpg">						
				</section>
				
				<section>
					<section>
						<h2>Explicit waits</h2>
						<img width="400" height="500" src="../images/11/11s3.jpg">
					</section>
					<section>	
						<ul> Selenium Waits
							<li>Waiting is having the automated task execution elapse a certain amount of time before continuing with the next step.</li>
							<li><b style="color:red;">WARNING:</b> Do not mix implicit and explicit waits. Doing so can cause unpredictable wait times. For example setting an implicit wait of 10s and an explicit wait of 15 seconds, could cause a timeout to occur after 20 seconds</li>
						</ul>
						<img style="border:0px solid #000; margin-left:-20%;" width="350" height="150" src="../images/11/11s4.jpg">
					</section>	
					<section>
						<h2>Explicit waits</h2>
						<ul>
							<li>An explicit waits is code you define to wait for a certain condition to occur before proceeding further in the code.</li>
							<li>The <b style="color:red;">worst case of this is Thread.sleep()</b>, which sets the condition to an exact time period to wait. There are some convenience methods provided that help you write code that will wait only as long as required. WebDriverWait in combination with ExpectedCondition is one way this can be accomplished.</li>
						</ul>
						<img width="350" height="150" src="../images/11/11wait.jpg">
					</section>	
					<section>
						<h2>Explicit waits (2)</h2>
						<p>
							The code below waits up to 10 seconds before throwing a TimeoutException or if it finds the element will return it in 0 - 10 seconds. WebDriverWait by default calls the ExpectedCondition every 500 milliseconds until it returns successfully. A successful return is for ExpectedCondition type is Boolean return true or not null return value for all other ExpectedCondition types.
						</p>
						<pre>Waits for 10 seconds<code>
WebDriver driver = new FirefoxDriver(); 
driver.get("http://somedomain/url_that_delays_loading"); 
WebElement myDynamicElement = (new WebDriverWait(driver, 10)) 
	.until(ExpectedConditions.presenceOfElementLocated(By.id("myDynamicElement"))); 
						</code></pre>
					</section>						
				</section>
			
				<section>
					<section>
						<h2>Implicit waits</h2>
						<img width="400" height="500" src="../images/11/11expl.png">
					</section>
					<section>
						<p>
							An implicit wait is to tell WebDriver to poll the DOM for a certain amount of time when trying to find an element or elements if they are not immediately available. The default setting is 0. Once set, the implicit wait is set for the life of the WebDriver object instance.

						</p>
						<pre>Waits for 10 seconds<code>
WebDriver driver = new FirefoxDriver();
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS); 
driver.get("http://somedomain/url_that_delays_loading"); 
WebElement myDynamicElement = driver.findElement(By.id("myDynamicElement")); 
						</code></pre>
					</section>
				</section>
			
				<section>
					<section>
						<h2>Custom-expected conditions</h2>
						<img width="500" height="500" src="../images/11/11cond.gif">
					</section>
					<section>
						<ul>Expected conditions						
							<li>There are some common conditions that are frequently come across when automating web browsers. Java happens to have convenience methods so you don’t have to code an ExpectedCondition class yourself or create your own utility package for them.</li>
							<li>e.g. Element is Clickable => it is Displayed and Enabled</li>
							<li>The <a href="https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html">ExpectedConditions package</a> for Java contains a set of predefined conditions to use with WebDriverWait.</li>
						</ul>
						<pre>Waits for 10 seconds<code>
WebDriverWait wait = new WebDriverWait(driver, 10); 
WebElement element = 
	wait.until(ExpectedConditions.elementToBeClickable(By.id("someid"))); 
						</code></pre>
					</section>
					<section>
						<h2>Expected conditions (2)</h2>
						<ul>
							<li>alertIsPresent() : Is Alert Present?</li>
							<li>elementSelectionStateToBe: Is the element selected?</li>
							<li>elementToBeClickable: Is the element clickable?</li>
							<li>elementToBeSelected: Element is selected</li>
							<li>frameToBeAvailableAndSwitchToIt: Is frame available and selected?</li>
							<li>invisibilityOfElementLocated: Is the element invisible?</li>
						</ul>
					</section>
					<section>
						<h2>Expected conditions (3)</h2>
						<ul>
							<li>presenceOfAllElementsLocatedBy: All elements presence</li>
							<li>location.refreshed: Wait for a page refresh.</li>
							<li>textToBePresentInElement: Is the text present for a particular element?</li>
							<li>textToBePresentInElementValue: Is the element value present for a particular element?</li>
							<li>visibilityOf: Is the element visible?</li>
							<li>titleContains: Is that title contain?</li>
						</ul>
					</section>
				</section>
					
				<section>
					<section>
						<h2>Popup and alert windows</h2>
						<img width="400" height="200" src="../images/11/11warn.png">
					</section>
					<section>
						<ul> Popup and alert windows
							<li>
								There are two types of alerts that we would be focusing on majorly:
								<ul>
									<li>Windows based alert pop ups</li>
									<li>Web based alert pop ups</li>	
								</ul> 
							</li>										
							<li>Handling pop up is one of the most challenging piece of work to automate while testing web applications. Owing to the diversity in types of pop ups complexes the situation even more.</li>
						</ul>	
						<img width="400" height="200" src="../images/11/11s5.png">
					</section>
					<section>
						<ul> Popup and alert windows (2)
							<li>Web Based Popups</li>
							<li>
								There are the four methods that we would be using along with the Alert interface.
								<ul>
									<li><b>void dismiss()</b> – The dismiss() method clicks on the “Cancel” button as soon as the pop up window appears.</li>
									<li><b>void accept()</b> – The accept() method clicks on the “Ok” button as soon as the pop up window appears.</li>
									<li><b>String getText()</b> – The getText() method returns the text displayed on the alert box.</li>
									<li><b>void sendKeys(String stringToSend)</b> – The sendKeys() method enters the specified string pattern into the alert box.</li>								
								</ul> 
							</li>		
						</ul>						
					</section>
					<section>
						<ul> Popup and alert windows (3)
							<li>Import <b>org.openqa.selenium.Alert</b> – references to the Alert class which is required to handle the web based alerts in WebDriver.</li>
							<li>Sometimes we need to handle pop ups generated by <b>Windows</b> like a <b>print pop up</b> or a browsing <b>window while uploading a file</b>.</li>	
							<li>Handling these pop-ups have always been a little tricky as we know Selenium is an automation testing tool which supports only web application testing, that means, it doesn’t support <b>Windows based</b> applications and window alert is one of them. However Selenium alone can’t help the situation but along with some third party intervention, this problem can be overcome.</li>
						</ul>						
					</section>
					<section>
						<ul> Popup and alert windows (4)
							<li>There are several third party tools available for handling window based pop-ups along with the selenium.</li>
							<li>We can handle a window based pop up using <b>Robot class</b>.</li>	
							<li>Robot class is a java based utility which emulates the keyboard and mouse actions.</li>
						</ul>	
						<img width="300" height="200" data-src="../images/11/11s6.jpg">
					</section>
					<section>
						<ul> Popup and alert windows (5)
						<li><b>import java.awt.Robot</b> – Import this package prior to the script creation The package references to the Robot class in java which is required simulate keyboard and mouse events.</li>	
							<li><b>import java.awt.event.KeyEvent</b> – – The package allows the user to use keyPress and keyRelease events of keyboard.</li>
						</ul>	
						<pre>Robot class<code>
// click on attach files icon
driver.findElement(By.xpath("//div[contains(@command,'Files')]//div[contains(@class,'aaA')]")).click();
// creating instance of Robot class (A java based utility)
Robot rb = new Robot();
// pressing keys with the help of keyPress and keyRelease events
rb.keyPress(KeyEvent.VK_ENTER);
rb.keyRelease(KeyEvent.VK_ENTER);
robot.delay(2000);
						</code></pre>
					</section>	
					<section>
						Popup and alert windows (6)
						<p> 
							You can also try waiting for the alert to appear and then accepting it.
						</p>						
						<pre>Accept alert<code>
try{ 
	//Wait 10 seconds till alert is present 
	WebDriverWait wait = new WebDriverWait(driver, 10); 
	Alert alert = wait.until(ExpectedConditions.alertIsPresent()); 

	//Accepting alert. 
	alert.accept(); 
	System.out.println("Accepted the alert successfully."); 
}catch(Throwable e){
	System.err.println("Error came while waiting for the alert popup. "+e.getMessage());
} 
//Or use
driver.switchTo().alert().accept();
driver.switchTo().alert().dismiss();
driver.switchTo().alert().defaultConent(); 
						</code></pre>						
						
					</section>	
				</section>	
					
				<section>
					<section>
						<h2>Frames</h2>
						<img width="400" height="200" src="../images/11/11frames.jpg">
					</section>
					<section>
						<h2>Frames (2)</h2>
						<p>Moving Between Windows and Frames - some web applications have many frames or multiple windows. WebDriver supports moving between named windows using the “switchTo” method:</p>
						<pre>switchTo<code>
driver.switchTo().window("windowName"); 
						</code></pre>
					</section>
					<section>
						<h2>Frames (3)</h2>
						<p>All calls to driver will now be interpreted as being directed to the particular window. <b>But how do you know the window’s name?</b> Take a look at the javascript or link that opened it:</p>
						<pre>windowName<code>
<a href="somewhere.html" target="windowName">Click here to open a new window</a> 
						</code></pre>
					</section>
					<section>
						<h2>Frames (4)</h2>
						<p>Alternatively, you can pass a “window handle” to the “switchTo().window()” method. Knowing this, it’s possible to iterate over every open window like so:</p>
						<pre>switchTo window<code>
for (String handle : driver.getWindowHandles()) { 
	driver.switchTo().window(handle);
 } 
						</code></pre>
						You can also switch from frame to frame (or into iframes):
						<pre>switchTo window<code>
driver.switchTo().frame("frameName"); 
						</code></pre>
					</section>
				</section>
				
				<section>
					<section>
						<h2>Verifications and Asseritons</h2>
						<img width="300" height="400" src="../images/11/11assert.jpg">
					</section>
					<section>
						<ul>
							Verifications and Asseritons (2)
							<li>
								<ul>Assert command in Selenium:
									<li>When an "assert" command fails then test execution will be aborted.</li>
									<li>Assert is best used when the check value has to pass for the test to be able to continue to run. Like a log in.</li>
								</ul>
							</li>
							<li>
								<ul>Verify command in Selenium:
									<li>When a "verify" command fails then test will continue executing and logging the failure.</li>
									<li>Verify is best used to check non critical things. Like the presence of a headline element.</li>
								</ul>
							</li>							
						</ul>
					</section>
					<section>
						<ul>
							Verifications and Asseritons (3)
							<li>TestNG assertion - <b>Assert.assertEquals(actual, expected)</b></li>
							<li>This assertion is useful to compare expected and actual values in selenium webdriver. If both values match then its fine and will continue execution. But if fails then immediately it will mark that specific test method as fail and exit from that test method.</li>	
							<li>You can use different types of values in actual and expected like boolean, byte[], char, double, float, int, etc.. but function is same for all. Let we look at simple example to understand it better.</li>							
						</ul>
						<pre>assertEquals<code>
Assert.assertEquals(Actualtext, "Tuesday, 28 January 2014");
						</code></pre>
					</section>
				</section>
				
				<section>
					<img width="900" height="500" data-src="../images/1qas.jpg">
					evgenikostadinov@gmail.com
				</section>		
				
				<section>
					<section>
						<h2>EXERCISE</h2>
						<img style="border:0px solid #000; margin-left:-20%;" width="900" height="550" src="../images/11/11e1.png">				
					</section>		
					<section>
						<h2>EXERCISE (2)</h2>
						<img style="border:0px solid #000; margin-left:-20%;" width="900" height="550" src="../images/11/11e2.png">				
					</section>
				</section>				
			</div>

		</div>

		<script src="../lib/js/head.min.js"></script>
		<script src="../js/reveal.js"></script>

		<script>

			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: '../lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: '../plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: '../plugin/zoom-js/zoom.js', async: true },
					{ src: '../plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
